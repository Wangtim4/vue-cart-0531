{"version":3,"file":"js/314.2349978e.js","mappings":"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","sources":["webpack://0418/./src/views/CartList.vue","webpack://0418/./src/views/CartList.vue?9bdf"],"sourcesContent":["<template>\r\n  <LoadIng :active=\"isLoading\"></LoadIng>  \r\n  <div class=\"container my-5\">\r\n    <div class=\"col-12\">\r\n      <div v-if=\"cart.carts?.length > 0\">\r\n        <div class=\"row text-center my-5\">\r\n          <ul class=\"d-flex justify-content-around gap-3 fs-4 my-3\">\r\n            <li class=\"border p-3 bg-primary text-white border-r-20\">\r\n              Step1<br />購物清單\r\n            </li>\r\n            <li class=\"border p-3 border-r-20\">Step2<br />填寫資料</li>\r\n            <li class=\"border p-3 border-r-20 text-secondary\">\r\n              Step3<br />結帳流程\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <table class=\"table border fs-5 align-middle text-center\">\r\n          <thead class=\"bg-primary text-white\">\r\n            <!-- <th colspan=\"6\"><h3>購物清單</h3></th> -->\r\n            <tr>\r\n              <th>商品圖</th>\r\n              <th>品名</th>\r\n              <th style=\"width: 200px\">數量</th>\r\n              <th>單價</th>\r\n              <th>小計</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"item in cart.carts\" :key=\"item.id\">\r\n              <td>\r\n                <img\r\n                  :src=\"item.product.imageUrl\"\r\n                  class=\"img-object-fit-100\"\r\n                  alt=\"\"\r\n                />\r\n              </td>\r\n              <td>{{ item.product.title }}</td>\r\n              <td>\r\n                <div class=\"input-group\">\r\n                  <input\r\n                    type=\"number\"\r\n                    class=\"form-control\"\r\n                    min=\"1\"\r\n                    :disabled=\"item.id === status.loadingItem\"\r\n                    v-model.number=\"item.qty\"\r\n                    @change=\"updateCart(item)\"\r\n                  />\r\n                  <div class=\"input-group-text\">/{{ item.product.unit }}</div>\r\n                </div>\r\n              </td>\r\n              <td>NT$ {{ item.product.price }}</td>\r\n              <td>NT$ {{ item.total }}</td>\r\n              <td>\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-outline-danger\"\r\n                  :disabled=\"status.loadingItem === item.id\"\r\n                  @click=\"removeCartItem(item.id)\"\r\n                >\r\n                  <i class=\"bi bi-x-lg\"></i>\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n          <tfoot class=\"fs-2\">\r\n            <tr>\r\n              <td colspan=\"5\" class=\"text-end\">總計 共 NT$ {{ cart.total }}</td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n        <div class=\"d-flex justify-content-between\">\r\n          <router-link to=\"/products\">\r\n            <button class=\"btn btn-lg btn-secondary\">\r\n              <i class=\"bi bi-caret-left-fill\"></i>繼續購物\r\n            </button>\r\n          </router-link>\r\n          <router-link to=\"/order\">\r\n            <button class=\"btn btn-lg btn-danger\">\r\n              下一步<i class=\"bi bi-caret-right-fill\"></i>\r\n            </button>\r\n          </router-link>\r\n        </div>\r\n      </div>\r\n      <div class=\"mb-3 no-shop-box\" v-else>\r\n        <h3 class=\"py-5 mt-3\">哎呀！您的購物車是空的，趕快去挑選吧！</h3>\r\n        <router-link to=\"/products\">\r\n          <button class=\"btn btn-lg btn-secondary\">\r\n            <i class=\"bi bi-caret-left-fill\"></i>繼續購物\r\n          </button>\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: [],\r\n      product: {},\r\n      isLoading: false,\r\n      status: {\r\n        loadingItem: \"\", // 對應品項 id\r\n      },\r\n      form: {\r\n        user: {\r\n          name: \"\",\r\n          email: \"\",\r\n          tel: \"\",\r\n          address: \"\",\r\n        },\r\n        message: \"\",\r\n      },\r\n      cart: {},\r\n      messages: \"\",\r\n      coupon_code: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    getCart() {\r\n      // [API]: /api/:api_path/cart[方法]: get\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.isLoading = true;\r\n      console.log(url);\r\n      this.$http.get(url).then((res) => {\r\n        console.log(res.data.data);\r\n        this.isLoading = false;\r\n        this.cart = res.data.data;\r\n        this.messages = res.messages;\r\n      });\r\n    },\r\n    removeCartItem(id) {\r\n      // console.log(id);\r\n      this.status.loadingItem = id;\r\n      // [API]: /api/:api_path/cart/:id[方法]: delete\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\r\n      console.log(url);\r\n      this.$http.delete(url).then((response) => {\r\n        // console.log(res);\r\n        this.$httpMessageState(response, \"移除購物車品項\");\r\n        this.status.loadingItem = \"\";\r\n        this.getCart();\r\n      });\r\n    },\r\n    updateCart(item) {\r\n      console.log(item);\r\n      // [API]: /api/:api_path/cart/:id[方法]: put[說明]: product_id(String)、qty(Number) 為必填欄位、[參數]: { \"data\": { \"product_id\":\"-L9tH8jxVb2Ka_DYPwng\",\"qty\":1 } }\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\r\n      const cart = {\r\n        product_id: item.product_id,\r\n        qty: item.qty,\r\n      };\r\n      this.$http.put(url, { data: cart }).then((res) => {\r\n        console.log(res);\r\n        this.status.loadingItem = \"\";\r\n        this.getCart();\r\n      });\r\n    },\r\n    createOrder() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\r\n      const order = this.form;\r\n      this.$http.post(url, { data: order }).then((res) => {\r\n        console.log(res);\r\n        this.$httpMessageState(res, \"送出訂單\");\r\n        const orderId = res.data.orderId;\r\n        this.$router.push(`./checkout/${orderId}`);\r\n      });\r\n    },\r\n    \r\n  },\r\n  created() {\r\n    this.getCart();\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.img-object-fit-100 {\r\n  height: 100px;\r\n  object-fit: cover;\r\n}\r\n</style>\r\n","import { render } from \"./CartList.vue?vue&type=template&id=51e1537b&scoped=true\"\nimport script from \"./CartList.vue?vue&type=script&lang=js\"\nexport * from \"./CartList.vue?vue&type=script&lang=js\"\n\nimport \"./CartList.vue?vue&type=style&index=0&id=51e1537b&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\黃則叡\\\\Desktop\\\\vue cli\\\\coffee2-0530\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-51e1537b\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_hoisted_12","colspan","_createVNode","_component_LoadIng","active","$data","isLoading","_hoisted_1","_hoisted_2","cart","carts","length","_createElementBlock","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_Fragment","_renderList","item","key","id","src","product","imageUrl","alt","_toDisplayString","title","_hoisted_8","type","min","disabled","status","loadingItem","qty","$event","onChange","$options","updateCart","_hoisted_10","unit","price","total","onClick","removeCartItem","_hoisted_14","_hoisted_15","_hoisted_16","_component_router_link","to","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","data","products","form","user","name","email","tel","address","message","messages","coupon_code","methods","getCart","url","this","console","log","$http","get","then","res","delete","response","$httpMessageState","product_id","put","createOrder","order","post","orderId","$router","push","created","__exports__","render"],"sourceRoot":""}