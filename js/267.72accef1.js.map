{"version":3,"file":"js/267.72accef1.js","mappings":"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","sources":["webpack://0418/./src/views/Order.vue","webpack://0418/./src/views/Order.vue?7012"],"sourcesContent":["<template>\r\n    <div class=\"container \">\r\n        <div class=\"row text-center my-3\">\r\n            <ul class=\"d-flex justify-content-around gap-3 fs-4 my-3\">\r\n                <li class=\"border p-3 bg-primary text-white border-r-20 \">Step1<br />購物清單</li>\r\n                <li class=\"border p-3 bg-primary border-r-20 text-white\">Step2<br />填寫資料</li>\r\n                <li class=\"border p-3 border-r-20 text-secondary\">Step3<br />結帳流程</li>\r\n            </ul>\r\n        </div>\r\n\r\n        <div class=\"row d-flex justify-content-between\">\r\n\r\n            <div class=\"col-lg-5 col-md-12 p-0 my-3 \">\r\n                <table class=\"table shadow \">\r\n                    <thead class=\"bg-primary text-white text-center \">\r\n                        <tr>\r\n                            <td colspan=\"4\">\r\n                                <h3>訂單資訊</h3>\r\n                            </td>\r\n                        </tr>\r\n\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <th>品名</th>\r\n                            <th>單價</th>\r\n                            <th>數量</th>\r\n                            <th class=\"text-end\">小計</th>\r\n                        </tr>\r\n                        <template v-if=\"cart.carts\">\r\n                            <tr v-for=\"item in cart.carts\" :key=\"item.id\">\r\n                                <td>{{ item.product.title }}\r\n                                    <div class=\"text-danger\" v-if=\"item.coupon\">\r\n                                        已套用優惠券\r\n                                    </div>\r\n                                </td>\r\n                                <td>{{ item.product.price }}</td>\r\n                                <td>{{ item.qty }} / {{ item.product.unit }}</td>\r\n                                <td class=\"text-end\">\r\n                                    <small v-if=\"cart.final_total !== cart.total\" class=\"text-danger\">折扣價：</small>\r\n                                    {{ $filters.currency(item.final_total) }}\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td colspan=\"4\">\r\n                                    <div class=\"input-group mt-3 input-group-sm\">\r\n                                        <input type=\"text\" class=\"form-control\" v-model=\"coupon_code\"\r\n                                            placeholder=\"請輸入優惠碼\" />\r\n                                        <div class=\"input-group-append\">\r\n                                            <button class=\"btn btn-outline-secondary\" type=\"button\"\r\n                                                @click.prevent=\"addCouponCode\">\r\n                                                套用優惠碼\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        </template>\r\n                    </tbody>\r\n                    <tfoot class=\"bg-primary text-white  text-center \">\r\n                        <tr>\r\n                            <td colspan=\"3\" class=\"text-end\">總計</td>\r\n                            <td class=\"text-end\">{{ $filters.currency(cart.total) }}</td>\r\n                        </tr>\r\n                        <tr v-if=\"cart.final_total !== cart.total\">\r\n                            <td colspan=\"3\" class=\"text-end text-danger\">折扣價</td>\r\n                            <td class=\"text-end text-danger\">\r\n                                {{ $filters.currency(cart.final_total) }}\r\n                            </td>\r\n                        </tr>\r\n                    </tfoot>\r\n                </table>\r\n            </div>\r\n\r\n            <div class=\"col-lg-6 col-md-12 border p-3 my-3 bg-primary text-white fs-5 shadow\">\r\n                <div class=\"text-center\">\r\n                    <h3 class=\"fw-bold\">客戶資料</h3>\r\n                </div>\r\n                <hr>\r\n                <Form v-slot=\"{ errors }\" @submit=\"createOrder\">\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"email\" class=\"form-label\">Email</label>\r\n                        <Field id=\"email\" name=\"email\" type=\"email\" class=\"form-control\"\r\n                            :class=\"{ 'is-invalid': errors['email'] }\" placeholder=\"請輸入 Email\" rules=\"email|required\"\r\n                            v-model=\"form.user.email\">\r\n                        </Field>\r\n                    </div>\r\n\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"name\" class=\"form-label\">姓名</label>\r\n                        <Field id=\"name\" name=\"姓名\" type=\"text\" class=\"form-control\" :class=\"{ 'is-invalid': errors['姓名'] }\"\r\n                            placeholder=\"請輸入姓名\" rules=\"required\" v-model=\"form.user.name\"></Field>\r\n                        <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\r\n                    </div>\r\n\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"tel\" class=\"form-label\">電話</label>\r\n                        <Field id=\"tel\" name=\"電話\" type=\"tel\" class=\"form-control\" :class=\"{ 'is-invalid': errors['電話'] }\"\r\n                            placeholder=\"請輸入電話\" rules=\"required\" v-model=\"form.user.tel\"></Field>\r\n                        <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\r\n                    </div>\r\n\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"address\" class=\"form-label\">地址</label>\r\n                        <Field id=\"address\" name=\"地址\" type=\"text\" class=\"form-control\"\r\n                            :class=\"{ 'is-invalid': errors['地址'] }\" placeholder=\"請輸入地址\" rules=\"required\"\r\n                            v-model=\"form.user.address\"></Field>\r\n                        <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\r\n                    </div>\r\n\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"message\" class=\"form-label\">留言</label>\r\n                        <textarea name=\"\" id=\"message\" class=\"form-control\" cols=\"20\" rows=\"3\"\r\n                            v-model=\"form.message\"></textarea>\r\n                    </div>\r\n                    <div class=\"d-flex justify-content-between my-3 \">\r\n                        <router-link to=\"/cart\">\r\n                            <button class=\"btn btn-lg btn-outline-secondary \"><i\r\n                                    class=\"bi bi-caret-left-fill\"></i>上一步</button>\r\n                        </router-link>\r\n                        <button class=\"btn btn-lg btn-outline-danger \">送出訂單<i class=\"bi bi-caret-right-fill\"></i></button>\r\n                    </div>\r\n                </Form>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            products: [],\r\n            product: {},\r\n            status: {\r\n                loadingItem: '', // 對應品項 id\r\n            },\r\n            form: {\r\n                user: {\r\n                    name: '',\r\n                    email: '',\r\n                    tel: '',\r\n                    address: '',\r\n                },\r\n                message: '',\r\n            },\r\n            cart: {},\r\n            messages: '',\r\n            coupon_code: '',\r\n        };\r\n    },\r\n    methods: {\r\n        getCart() {\r\n            // [API]: /api/:api_path/cart[方法]: get\r\n            const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n            this.isLoading = true;\r\n            console.log(url);\r\n            this.$http.get(url)\r\n                .then((res) => {\r\n                    console.log(res.data.data);\r\n                    this.cart = res.data.data;\r\n                    this.messages = res.messages;\r\n                })\r\n        },\r\n        createOrder() {\r\n            const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\r\n            const order = this.form;\r\n            this.$http.post(url, { data: order })\r\n                .then((res) => {\r\n                    console.log(res);\r\n                    this.$httpMessageState(res, \"送出訂單\");\r\n                    const orderId = res.data.orderId;\r\n                    this.$router.push(`./checkout/${orderId}`);\r\n                });\r\n        },\r\n        addCouponCode() {\r\n            const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\r\n            const coupon = {\r\n                code: this.coupon_code,\r\n            }\r\n            this.$http.post(url, { data: coupon })\r\n                .then((res) => {\r\n                    console.log(res);\r\n                    this.getCart();\r\n                })\r\n        }\r\n    },\r\n    created() {\r\n        this.getCart()\r\n    },\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n@media screen and (min-width: 769px) {\r\n    .order-card {\r\n        position: sticky;\r\n        top: 85px;\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./Order.vue?vue&type=template&id=29d2320d\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\n\nimport \"./Order.vue?vue&type=style&index=0&id=29d2320d&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\黃則叡\\\\Desktop\\\\vue cli\\\\coffee2-0530\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","colspan","for","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","$data","cart","carts","_Fragment","key","_renderList","item","id","product","title","coupon","_hoisted_8","_toDisplayString","price","qty","unit","_hoisted_9","final_total","total","_hoisted_10","_ctx","$filters","currency","_hoisted_11","_hoisted_12","type","coupon_code","$event","placeholder","_hoisted_13","onClick","_cache","_withModifiers","args","$options","addCouponCode","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_createVNode","_component_Form","onSubmit","createOrder","errors","_hoisted_23","_hoisted_24","_component_Field","name","_normalizeClass","rules","form","user","email","_hoisted_25","_hoisted_26","_component_ErrorMessage","_hoisted_27","_hoisted_28","tel","_hoisted_29","_hoisted_30","address","_hoisted_31","_hoisted_32","cols","rows","message","_hoisted_33","_component_router_link","to","_hoisted_34","_hoisted_35","data","products","status","loadingItem","messages","methods","getCart","url","this","isLoading","console","log","$http","get","then","res","order","post","$httpMessageState","orderId","$router","push","code","created","__exports__","render"],"sourceRoot":""}